import { createElement as h } from 'react';
import { NavLink } from 'react-router-dom';
import { classBuilder } from '@not-govuk/component-helpers';
import { urlParse } from '@not-govuk/route-utils';
import '../assets/Anchor.scss';
const includes = (haystack, needle) => {
    const subIncludes = (haystack, needle) => (Array.isArray(needle) ? (needle.length === haystack.length &&
        needle.reduce((acc, cur, idx) => acc && subIncludes(haystack[idx], cur), true)) : (typeof needle === 'object' ? (typeof haystack === 'object' &&
        Object.keys(needle).reduce((acc, cur) => acc && subIncludes(haystack[cur], needle[cur]), true)) : (needle === haystack)));
    return subIncludes(haystack, needle);
};
export const isActive = (query) => (match, location) => (match && includes(urlParse(location.search).query, query));
export const Anchor = ({ children, classBlock, classModifiers, className, forceExternal = false, href, ...attrs }) => {
    const classes = classBuilder('penultimate-anchor', classBlock, classModifiers, className);
    const url = urlParse(href);
    return (forceExternal || url.host) ? (h("a", Object.assign({}, attrs, { className: classes(), href: href }), children)) : (h(NavLink, Object.assign({}, attrs, { className: classes(), to: href, isActive: isActive(url.query), exact: true }), children));
};
Anchor.displayName = 'A';
export default Anchor;
export const A = Anchor;
