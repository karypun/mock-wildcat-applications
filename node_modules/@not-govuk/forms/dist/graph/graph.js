"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Graph = void 0;
const field_1 = require("./field");
class Graph extends Array {
    constructor(...args) {
        super(...args);
        Object.setPrototypeOf(this, Graph.prototype);
    }
    toPath(values, next) {
        return (this
            .traverse(values)
            .map(e => e.toPathItem()));
    }
    gatherAllFieldNodes() {
        return (this
            .toArray()
            .filter(field_1.isFieldNode));
    }
    gatherFieldsAlongPath(values) {
        return (this
            .traverse(values)
            .filter(field_1.isFieldNode)
            .map(e => field_1.isFieldNode(e) && e.name));
    }
    deepMap_(f) {
        this.toArray().map(f);
    }
    toArray() {
        return this.flatMap(e => e.toArray());
    }
    traverse(values) {
        return this.flatMap(e => e.traverse(values));
    }
}
exports.Graph = Graph;
