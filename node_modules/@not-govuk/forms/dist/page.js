"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Page = void 0;
const react_1 = require("react");
const context_1 = require("./context");
const registry_1 = require("./registry");
const graph_1 = require("./graph");
exports.Page = props => {
    const form = context_1.useForm();
    const state = form.completion.pop();
    const active = state && state.active;
    if (active === undefined) {
        const contents = new graph_1.Graph();
        const node = new graph_1.PageNode(contents);
        form.registry.register(node);
        const register = new registry_1.Register(contents);
        register.openRegistration();
        return react_1.createElement(registry_1.Registry, {
            children: props.children,
            value: register
        });
    }
    else {
        return (active
            ? props.children || null
            : null);
    }
};
exports.default = exports.Page;
