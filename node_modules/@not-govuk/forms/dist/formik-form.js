"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FormikForm = void 0;
const react_1 = require("react");
const formik_1 = require("formik");
const context_1 = require("./context");
const form_1 = require("./form");
const withFormik = (options) => (Component) => props => (react_1.createElement(formik_1.Formik, options, (formik) => react_1.createElement(Component, { ...props, ...formik })));
const wireUpForm = (Component) => ({ handleReset, handleSubmit, ...props }) => {
    const { update, updateScope } = context_1.useForm();
    const onSubmit = event => {
        updateScope();
        const r = handleSubmit(event);
        update();
        return r;
    };
    return react_1.createElement(Component, {
        ...props,
        onReset: handleReset,
        onSubmit: onSubmit
    });
};
const withFormikForm = (Component) => ({ component, enableReinitialize, initialErrors, initialStatus, initialTouched, initialValues, innerRef, isInitialValid, onReset, onSubmit, render, validate, validateOnBlur, validateOnChange, validateOnMount, validationSchema, ...props }) => {
    const formikConfig = {
        onSubmit,
        initialErrors,
        initialTouched,
        initialValues,
        validate
    };
    return react_1.createElement(withFormik(formikConfig)(wireUpForm(Component)), props);
};
exports.FormikForm = withFormikForm(form_1.Form);
exports.default = exports.FormikForm;
