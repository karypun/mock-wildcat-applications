"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useForm = void 0;
const formik_1 = require("formik");
const completion_1 = require("./completion");
const registry_1 = require("./registry");
exports.useForm = () => {
    const completion = completion_1.useCompletionContext();
    const formik = formik_1.useFormikContext();
    const registry = registry_1.useRegistrationContext();
    return {
        ...formik,
        completion,
        registry,
        updateScope: () => {
            completion.updateScope(formik.values);
        },
        update: () => {
            formik.validateForm()
                .then(errors => {
                completion.update(formik.values, errors);
                completion.getUnseenFields()
                    .map(e => formik.setFieldTouched(e, false, false));
            });
        }
    };
};
